webpackJsonp([63],{"1A8R":function(t,a){},retS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),s=e.n(i),o=e("Xxa5"),r=e.n(o),n=e("exGp"),_=e.n(n),d=e("7I1f"),c=e("L/hj"),u={data:function(){return{i_name:"",user_info_datas:{},avatar:"",select_Province:[],select_City:[],select_district:[],select_year:[],GoodArea:[],flag:!0,show:!1,add_work_his:{},star_time:"",end_time:"",work_company:"",work_post:"",work_list:"",goodarea_true:[],user_type_:""}},created:function(){var t=this;this.user_type_=this.$route.query.user_type,"designer"==this.$route.query.user_type?this.$store.state.title_name="设计师个人资料":"plumber_and_electrician"==this.$route.query.user_type&&(this.$store.state.title_name="水电工个人资料");var a=[];Object(d.a)({url:"/api/getUserGoodArea",method:"post"}).then(function(t){if(console.log(t.data),200==t.data.status){for(var e=0;e<t.data.data.length;e++)t.data.data[e].is=!1;a=t.data.data}}),Object(d.a)({url:"/api/getUserStaffInfo",data:{user_type:this.$route.query.user_type},method:"post"}).then(function(e){if(console.log(e),200==e.data.status){null!=e.data.data.identification_info&&(t.id_card0=e.data.data.identification_info[0],t.id_card1=e.data.data.identification_info[1]),e.data.data.say_to_user?e.data.data.say_to_user:e.data.data.say_to_user="",t.user_info_datas=e.data.data,t.avatar=""==e.data.data.avatar?"":e.data.data.avatar,t.work_list=e.data.data.work_list,t.get_select_Province("once"),t.get_select_city("once");var i=e.data.data.goods_type?e.data.data.goods_type.split(","):[];console.log(i,"brr"),t.goodarea_true=i;for(var s=0;s<a.length;s++){var o=a[s];if(""!=i)for(var r=0;r<i.length;r++)i[r]==o.style_id&&(o.is=!0);t.GoodArea=a}}});for(var e=(new Date).getFullYear(),i=0;i<80;i++)this.select_year.push(e-i)},methods:{gender_tap:function(t){console.log(t.target.value),this.user_info_datas.gender=t.target.value},big_pic:function(t){this.$store.state.amplify_img=t},back_tap:function(){this.$router.go(-1)},goodarea_tap:function(t,a){var e=this.goodarea_true.indexOf(String(t));-1!=e?(this.goodarea_true.splice(e,1),this.GoodArea[a].is=!1):(this.GoodArea[a].is=!0,this.goodarea_true.push(String(t))),console.log(this.GoodArea)},avatar_tap:function(t){var a=this;return _()(r.a.mark(function e(){var i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(i=t.target.files[0])){e.next=6;break}return e.next=4,c.a.uplodeimg(i);case 4:s=e.sent,a.get_img(s);case 6:case"end":return e.stop()}},e,a)}))()},get_img:function(t){var a=this,e=new FormData;e.append("file",t),this.$store.commit("show_looding"),Object(d.a)({url:"/api/upload",method:"post",data:e}).then(function(t){a.$store.commit("hide_looding"),console.log(t.data.data[0]),a.avatar=a.user_info_datas.avatar=t.data.data[0]})},btn_tap:function(){var t=this;if(/^[a-zA-Z]{1}[-_a-zA-Z0-9]{5,19}$/.test(this.user_info_datas.weixin)){if(""==this.user_info_datas.province||""==this.user_info_datas.city)this.$toast("请选择地区！");else if(0==this.user_info_datas.district&&""!=this.select_district)return void this.$toast("请选择区/县！")}else this.$toast("请输入正确的微信号码！");this.user_info_datas.goods_type=this.goodarea_true.join(),""==this.user_info_datas.birth_month||""==this.user_info_datas.birth_year?this.$toast("请选择出生年月！"):""==this.goodarea_true?this.$toast("请选择擅长的类型"):(console.log(this.user_info_datas),this.user_info_datas.user_type=this.user_type_,this.$store.commit("show_looding"),this.user_info_datas.designer_works=s()(this.user_info_datas.designer_works),Object(d.a)({url:"/api/saveUserStaffInfo",data:this.user_info_datas,method:"post"}).then(function(a){t.$store.commit("hide_looding"),200==a.data.status?(t.$toast("修改成功！"),t.$router.go(-1)):t.$toast(a.data.msg)}))},Province_change:function(t){console.log(t),0!=t.target.value&&(this.user_info_datas.province=t.target.value,this.get_select_city()),this.select_City=this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0},City_change:function(t){0!=t.target.value?(this.user_info_datas.city=t.target.value,this.get_select_district(),this.user_info_datas.district=0):(this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0)},City_click:function(){""==this.user_info_datas.province&&this.$toast("请先选择省/市")},district_change:function(t){0!=t.target.value?this.user_info_datas.district=t.target.value:this.user_info_datas.district=0},district_click:function(){""==this.user_info_datas.city&&this.$toast("请先选择城市")},get_select_Province:function(t){var a=this;Object(d.a)({url:"/api/getAllProvince",method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(a.select_Province=e.data.data,t&&a.get_select_city("once"))})},get_select_city:function(t){var a=this;Object(d.a)({url:"/api/getAllCity",data:{province_id:this.user_info_datas.province},method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(a.select_City=e.data.data,t&&a.get_select_district(t))})},get_select_district:function(){var t=this;Object(d.a)({url:"/api/getAllDistrict",data:{city_id:this.user_info_datas.city},method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(t.select_district=a.data.data)})}}},l={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",[i("h3",[t._v("修改个人资料")]),t._v(" "),i("div",{staticClass:"avatar_uplode"},[i("div",{style:{background:t.avatar?"":"#fef8da"}},[i("input",{attrs:{type:"file"},on:{change:t.avatar_tap}}),t._v(" "),i("img",{staticClass:"avatar_img",attrs:{src:t.avatar,alt:""}})]),t._v(" "),i("p",[t._v("头像上传")])]),t._v(" "),i("ul",{staticClass:"guke"},[i("li",[i("span",[t._v("姓氏:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.xing,expression:"user_info_datas.xing"}],attrs:{type:"text",placeholder:"姓氏"},domProps:{value:t.user_info_datas.xing},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"xing",a.target.value)}}})]),t._v(" "),i("li",[i("span",[t._v("名字:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.name,expression:"user_info_datas.name"}],attrs:{type:"text",placeholder:"名字"},domProps:{value:t.user_info_datas.name},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"name",a.target.value)}}})]),t._v(" "),i("li",[i("span",[t._v("手机号:")]),t._v(" "),i("p",[t._v(t._s(t.user_info_datas.mobile))])]),t._v(" "),i("li",[i("span",[t._v("微信号:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.weixin,expression:"user_info_datas.weixin"}],attrs:{type:"text",placeholder:"微信号"},domProps:{value:t.user_info_datas.weixin},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"weixin",a.target.value)}}})]),t._v(" "),i("li",{staticClass:"gender"},[i("span",[t._v("性别:")]),t._v(" "),i("div",[i("select",{attrs:{name:"",id:""},domProps:{value:t.user_info_datas.gender},on:{change:t.gender_tap}},[i("option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("女")])])])]),t._v(" "),i("li",[i("span",[t._v("地区:")]),t._v(" "),i("div",[i("select",{domProps:{value:t.user_info_datas.province},on:{change:t.Province_change}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_Province,function(a,e){return i("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2),t._v(" "),i("select",{domProps:{value:t.user_info_datas.city},on:{change:t.City_change,click:t.City_click}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_City,function(a,e){return i("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2),t._v(" "),i("select",{domProps:{value:t.user_info_datas.district},on:{change:t.district_change,click:t.district_click}},[i("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_district,function(a,e){return i("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2)])])]),t._v(" "),i("div",{staticClass:"succer"},[i("ul",[i("li",{staticClass:"birthday"},[i("span",[t._v("出生年月：")]),t._v(" "),i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.birth_year,expression:"user_info_datas.birth_year"}],attrs:{name:"",id:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user_info_datas,"birth_year",a.target.multiple?e:e[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.select_year,function(a,e){return i("option",{key:e,domProps:{value:a}},[t._v(t._s(a)+"年")])})],2),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.birth_month,expression:"user_info_datas.birth_month"}],attrs:{name:"",id:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user_info_datas,"birth_month",a.target.multiple?e:e[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(12,function(a,e){return i("option",{key:e,domProps:{value:a}},[t._v(t._s(a>9?a:"0"+a)+"月")])})],2)])]),t._v(" "),i("li",{staticClass:"GoodArea"},[i("span",[t._v("擅长：")]),t._v(" "),i("div",t._l(t.GoodArea,function(a,s){return i("span",{key:s,on:{click:function(e){return t.goodarea_tap(a.style_id,s)}}},[t._v("\n              "+t._s(a.style_name)+"\n              "),a.is?i("img",{attrs:{src:e("FL6W"),alt:""}}):t._e()])}),0)])])]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("提交")])])])},staticRenderFns:[]};var v=e("VU/8")(u,l,!1,function(t){e("1A8R")},"data-v-0c7aa4ac",null);a.default=v.exports}});
//# sourceMappingURL=63.83622f748516c4c8a0b1.js.map