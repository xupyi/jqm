webpackJsonp([61],{QkH4:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("mvHQ"),e=s.n(a),n=s("7I1f"),o=s("L/hj"),_={components:{assess:s("PjFk").a},data:function(){return{shadow:!1,active:0,foot_index:1,desgin_price_active:s("FL6W"),desgin_price_normal:s("PBIX"),desgin_price_index:null,Designdata:{},price:"",desgin_price:"",UserList:[],house_List:[],val:{good_id:"",order_type:4,num:1,area:"",price:"",quantity_room_id:"",design_user_id:"",choice_id:""},designer_detail:"",status:"img",img_active:"",img_src:"",total:"0"}},mounted:function(){window.addEventListener("onscroll",function(){console.log("scrollTop")})},created:function(){var t=this;this.$store.commit("show_looding"),sessionStorage.getItem("design_data")&&(this.val=JSON.parse(sessionStorage.getItem("design_data")),this.desgin_price_index=sessionStorage.getItem("design_data_num"),this.total_tun(),this.total=o.a.accMul(this.val.price,this.val.area),sessionStorage.removeItem("design_data"),sessionStorage.removeItem("design_data_num")),this.$route.query.ch_id&&(this.val.choice_id=this.$route.query.ch_id),Object(n.a)({url:"/api/getDesignInfo",method:"post"}).then(function(i){console.log(i),t.$store.commit("hide_looding"),200==i.status&&(t.val.good_id=i.data.data.id,t.Designdata=i.data.data,t.img_src=""==i.data.data.gpics?"":i.data.data.gpics[0])}),Object(n.a)({url:"/api/getQuantityRoom",method:"post"}).then(function(i){console.log(i),200==i.data.status&&(t.house_List=i.data.data)}),(this.$route.query.designer_id||this.val.design_user_id)&&Object(n.a)({url:"/api/getUserInfo",data:{user_id:this.$route.query.designer_id?this.$route.query.designer_id:this.val.design_user_id},method:"post"}).then(function(i){console.log(i),200==i.data.status&&(t.designer_detail=i.data.data,t.val.design_user_id=i.data.data.id,t.val.price=t.desgin_price=i.data.data.design_price,t.desgin_price_index=30,t.total_tun())})},methods:{go_shop:function(){sessionStorage.setItem("shop_index",4),this.$router.push("/shop")},area_ipt:function(){this.total_tun()},total_tun:function(){30==this.desgin_price_index?""==this.desgin_price||""==this.val.area?this.total="0.00":this.total=o.a.accMul(this.desgin_price,this.val.area):""==this.price||""==this.val.area?this.total="0.00":this.total=o.a.accMul(this.price,this.val.area)},vr_tap:function(){""!=this.Designdata.panorama&&null!=this.Designdata.panorama&&(window.location.href=this.Designdata.panorama)},img_tap:function(t){this.status="img",this.img_active=t,this.img_src=this.Designdata.gpics[t]},img_vr:function(){this.img_active=this.status="vr"},left_tap:function(){"img"==this.status?(this.img_active=0==this.img_active?0:this.img_active-1,this.img_src=this.Designdata.gpics[this.img_active]):(this.status="img",this.img_active=this.Designdata.gpics.length-1,this.img_src=this.Designdata.gpics[this.img_active])},right_tap:function(){this.img_active!=this.Designdata.gpics.length-1||""==this.Designdata.video_pic_url?"img"==this.status&&this.img_active!=this.Designdata.gpics.length-1&&(this.img_active+=1,this.img_src=this.Designdata.gpics[this.img_active]):this.img_active=this.status="vr"},house_tap:function(){this.$store.state.is_login?this.$router.push("/home/room"):(this.$toast("暂未登录，请先登录"),this.$router.push("/login"))},on_yuan:function(){""==this.desgin_price?this.$toast("请指定设计师"):(this.val.design_user_id=this.designer_detail.id,this.desgin_price_index=30,this.val.price=this.desgin_price)},desgin_price_tap:function(t,i){this.val.design_user_id="",this.desgin_price_index=t,this.val.price=this.price=i,this.total_tun()},appoint_designer_tap:function(){sessionStorage.setItem("design_data",e()(this.val)),sessionStorage.setItem("design_data_num",this.desgin_price_index),this.$router.push("/home/design/designer_list")},select_wall_tap:function(){sessionStorage.setItem("design_data",e()(this.val)),sessionStorage.setItem("design_data_num",this.desgin_price_index),this.$router.push("/select_design")},x_shop_tap:function(){this.shadow=!this.shadow},add_shop_tap:function(){var t=this;console.log(this.val),""!=this.val.area&&"0"!=this.val.area?""==this.val.quantity_room_id?this.$toast("请选择房屋"):this.$route.query.ch_id?(""!=this.val.design_user_id&&(this.val.price=""),console.log(this.val),this.$store.commit("show_looding"),Object(n.a)({url:"/api/addCart",data:this.val,method:"post"}).then(function(i){console.log(i),t.$store.commit("hide_looding"),200==i.data.status&&(Object(n.a)({url:"/api/delUserChoice",method:"post"}).then(function(t){console.log(t)}),t.shadow=!t.shadow)})):this.$toast("请选择地墙顶造型"):this.$toast("请输入房屋面积")},footer_tap:function(t){this.foot_index=t}}},r={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("main",{staticClass:"design1"},[a("section",{staticClass:"img_list"},[a("div",{staticClass:"gpics"},["img"==t.status&&""!=t.Designdata.panorama&&null!=t.Designdata.panorama?a("img",{staticClass:"vr360",attrs:{src:s("DqIX"),alt:""},on:{click:t.vr_tap}}):t._e(),t._v(" "),"img"==t.status?a("img",{staticClass:"big_img",attrs:{src:t.img_src,alt:""},on:{click:t.vr_tap}}):a("video",{staticStyle:{"object-fit":"fill"},attrs:{controls:"",poster:t.Designdata.video_pic_url,src:t.Designdata.video_url}})]),t._v(" "),a("div",{staticClass:"list_ul"},[a("img",{attrs:{src:s("M0pp"),alt:""},on:{click:t.left_tap}}),t._v(" "),a("ul",[t._l(t.Designdata.gpics,function(i,s){return a("li",{key:s,class:t.img_active==s?"img_bor":"",on:{click:function(i){return t.img_tap(s)}}},[a("img",{attrs:{src:i,alt:""}})])}),t._v(" "),t.Designdata.video_pic_url?a("li",{staticClass:"vr",class:"vr"==t.img_active?"img_bor":"",on:{click:t.img_vr}},[a("img",{attrs:{src:t.Designdata.video_pic_url,alt:""}}),t._v(" "),a("img",{staticClass:"bf_img",attrs:{src:s("m9pA"),alt:""}})]):t._e()],2),t._v(" "),a("img",{attrs:{src:s("QucZ"),alt:""},on:{click:t.right_tap}})])]),t._v(" "),a("p",[a("span",[t._v("推荐指数：")]),t._v(" "),t._l(t.Designdata.rec_star,function(t,i){return a("img",{key:i,attrs:{src:s("RnCc"),alt:""}})})],2),t._v(" "),a("ul",{staticClass:"design_ul"},[t._l(t.Designdata.good_desgin_price,function(i,s){return a("li",{key:s,on:{click:function(s){return t.desgin_price_tap(i.id,i.price)}}},[a("div",[a("img",{attrs:{src:t.desgin_price_index==i.id?t.desgin_price_active:t.desgin_price_normal,alt:""}}),t._v(" "),a("p",[t._v("\n            每平米设计费单价\n            "),a("span",[t._v(t._s(parseInt(i.price)))]),t._v(" 元\n          ")])]),t._v(" "),a("span",{staticClass:"desc"},[t._v(t._s(i.desc))])])}),t._v(" "),a("li",[a("div",{staticClass:"appoint_designer"},[a("img",{attrs:{src:30==t.desgin_price_index?t.desgin_price_active:t.desgin_price_normal,alt:""},on:{click:t.on_yuan}}),t._v(" "),a("div",[a("p",{staticClass:"appoint_designer_l"},[t._v("\n              每平米设计费单价\n              "),a("span",[t._v(t._s(""!=t.desgin_price?parseInt(t.desgin_price):""))]),t._v("元\n            ")]),t._v(" "),a("p",{staticClass:"appoint_designer_btn",on:{click:t.appoint_designer_tap}},[""==t.designer_detail?a("span",{staticStyle:{background:"#ff1284"}},[t._v("指定设计师")]):a("span",{staticStyle:{background:"#2fc145","text-align":"left"}},[t._v(t._s(t.designer_detail.province_name)+"\n                "+t._s(t.designer_detail.xing)+t._s(t.designer_detail.name))])])])]),t._v(" "),a("p",{staticClass:"desc"},[t._v("(无增项,费用包含设计、施工、主材和家具)")])]),t._v(" "),a("li",[a("div",{staticClass:"area"},[t._v("\n          待设计房屋面积：\n          "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.area,expression:"val.area"}],attrs:{type:"number"},domProps:{value:t.val.area},on:{change:t.area_ipt,input:function(i){i.target.composing||t.$set(t.val,"area",i.target.value)}}}),t._v("平米\n        ")]),t._v(" "),a("div",{staticClass:"select_home"},[t._v("\n          选择房屋：\n          "),""==t.house_List?a("p",{on:{click:t.house_tap}},[a("span",[t._v("请先提交量房预约")]),t._v(" "),a("img",{attrs:{src:s("RewR"),alt:""}})]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.val.quantity_room_id,expression:"val.quantity_room_id"}],on:{change:function(i){var s=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.val,"quantity_room_id",i.target.multiple?s:s[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.house_List,function(i,s){return a("option",{key:s,domProps:{value:i.id}},[t._v(t._s(i.address))])})],2)])])],2),t._v(" "),a("p",{staticClass:"amount_price"},[t._v("\n      设计费用合计￥\n      "),a("span",[t._v(t._s(Number(t.total).toFixed(2)))]),t._v("元\n    ")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"designer_btn"},[a("p",{on:{click:t.select_wall_tap}},[a("span",[t._v("选择地墙顶的造型")])]),t._v(" "),a("p",{on:{click:t.add_shop_tap}},[a("span",[t._v("加入购物车")])])]),t._v(" "),a("div",{staticClass:"footer"},[a("ul",[a("li",{style:{background:1==t.foot_index?"#2FC145":""},on:{click:function(i){return t.footer_tap(1)}}},[t._v("设计介绍")]),t._v(" "),a("li",{style:{background:2==t.foot_index?"#2FC145":""},on:{click:function(i){return t.footer_tap(2)}}},[t._v("顾客评价")])]),t._v(" "),a("div",[1==t.foot_index?a("div",{staticClass:"foot_cont",domProps:{innerHTML:t._s(t.Designdata.content)}}):a("div",[a("assess",{attrs:{assess:t.val.good_id}})],1)])])]),t._v(" "),t.shadow?a("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[a("div",[t._m(1),t._v(" "),a("div",{staticClass:"shadow_btn"},[a("span",{on:{click:t.x_shop_tap}},[t._v("留在本页")]),t._v(" "),a("div",{staticClass:"shadow_btn_line"}),t._v(" "),a("span",{on:{click:t.go_shop}},[t._v("去购物车结算")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"point"},[i("p",[this._v("友情提示：")]),this._v(" "),i("p",[this._v("点击“加入购物车”之前，请您仔细阅读“设计介绍”。")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"shadow_cont"},[i("img",{attrs:{src:s("gSOG"),alt:""}}),this._v(" "),i("p",[this._v("已成功加入购物车")])])}]};var c=s("VU/8")(_,r,!1,function(t){s("TM6V")},"data-v-1111d59e",null);i.default=c.exports},TM6V:function(t,i){}});
//# sourceMappingURL=61.c0cef03be4fa4837ab6a.js.map