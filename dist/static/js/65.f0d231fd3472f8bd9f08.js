webpackJsonp([65],{"4RK+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Fd2+");var i=a("7I1f"),s={data:function(){return{normal:a("PBIX"),active:a("FL6W"),val:{consignee:"",mobile:"",address:"",tel:"",id:"",province:"0",city:"0",district:0,default:""},select_Province:[],select_City:[],select_district:[]}},created:function(){var t=this;this.$route.query.id?Object(i.a)({url:"/api/getUserAddressList",method:"post"}).then(function(e){if(200==e.data.status){console.log(e),t.address_list=e.data.data;for(var a=0;a<e.data.data.length;a++)e.data.data[a].id==t.$route.query.id&&(console.log(e.data.data[a]),t.val.consignee=e.data.data[a].consignee,t.val.mobile=e.data.data[a].mobile,t.val.address=e.data.data[a].address,t.val.tel=e.data.data[a].tel,t.val.id=e.data.data[a].id,t.val.province=e.data.data[a].province,t.val.city=e.data.data[a].city,t.val.district=e.data.data[a].district,t.val.default=e.data.data[a].default,t.get_select_Province("once"),t.get_select_city("once"))}else console.log(e),t.$toast(e.data.msg)}):this.get_select_Province()},methods:{checked_tap:function(){this.val.default=1==this.val.default?0:1},Province_change:function(t){console.log(t),0!=t.target.value&&(this.val.province=t.target.value,this.get_select_city()),this.select_City=this.select_district=[],this.val.city=this.val.district=0},City_change:function(t){0!=t.target.value?(this.val.city=t.target.value,this.get_select_district(),this.val.district=0):(this.select_district=[],this.val.city=this.val.district=0)},City_click:function(){""==this.val.province&&this.$toast("请先选择省/市")},district_change:function(t){0!=t.target.value?this.val.district=t.target.value:this.val.district=0},district_click:function(){""==this.val.city&&this.$toast("请先选择城市")},get_select_Province:function(t){var e=this;Object(i.a)({url:"/api/getAllProvince",method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(e.select_Province=a.data.data,t&&e.get_select_city("once"))})},get_select_city:function(t){var e=this;Object(i.a)({url:"/api/getAllCity",data:{province_id:this.val.province},method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(e.select_City=a.data.data,t&&e.get_select_district(t))})},get_select_district:function(){var t=this;Object(i.a)({url:"/api/getAllDistrict",data:{city_id:this.val.city},method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(t.select_district=e.data.data)})},btn_tap:function(){var t=this;/^1[34578]\d{9}$/.test(this.val.mobile)?""==this.val.consignee?this.$toast("请输入收货人"):""==this.val.address?this.$toast("请输入详细地址"):0==this.val.city?this.$toast("请选择城市"):""!=this.select_district&&0==this.val.district?this.$toast("请选择区/县"):Object(i.a)({url:"/api/saveAddress",data:this.val,method:"post"}).then(function(e){200==e.data.status?(console.log(e),t.$route.query.path?(sessionStorage.setItem("address",e.data.data.address_id),t.$router.go(-1)):t.$router.go(-1),t.$toast(e.data.msg)):(console.log(e),t.$toast(e.data.msg)),t.$store.commit("hide_looding")}):this.$toast("请输入正确的手机号")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add_address"},[a("h3",{directives:[{name:"show",rawName:"v-show",value:""==t.val.id,expression:"val.id==''"}]},[t._v("新增收货地址")]),t._v(" "),a("h3",{directives:[{name:"show",rawName:"v-show",value:""!=t.val.id,expression:"val.id!=''"}]},[t._v("修改收货地址")]),t._v(" "),a("p",[t._v("(手机和座机号码至少填一项，其余都是必填项)")]),t._v(" "),a("ul",[a("li",[t._v("\n      收货人：\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.consignee,expression:"val.consignee"}],attrs:{type:"text",placeholder:"请输入收货人真实姓名"},domProps:{value:t.val.consignee},on:{input:function(e){e.target.composing||t.$set(t.val,"consignee",e.target.value)}}})]),t._v(" "),a("li",[t._v("\n      手机号码：\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.mobile,expression:"val.mobile"}],attrs:{type:"number",placeholder:"请输入收货人手机号"},domProps:{value:t.val.mobile},on:{input:function(e){e.target.composing||t.$set(t.val,"mobile",e.target.value)}}})]),t._v(" "),a("li",[t._v("\n      座机号码：\n      "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.val.tel,expression:"val.tel"}],attrs:{type:"number",placeholder:"区号-电话号码-分机"},domProps:{value:t.val.tel},on:{input:function(e){e.target.composing||t.$set(t.val,"tel",e.target.value)}}})]),t._v(" "),a("li",{staticClass:"add_city"},[a("div",{staticClass:"city"},[a("span",[t._v("所在地区：")]),t._v(" "),a("select",{domProps:{value:t.val.province},on:{change:t.Province_change}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_Province,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2),t._v(" "),a("select",{domProps:{value:t.val.city},on:{change:t.City_change,click:t.City_click}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_City,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2),t._v(" "),a("select",{domProps:{value:t.val.district},on:{change:t.district_change,click:t.district_click}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_district,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2)])]),t._v(" "),a("li",{staticClass:"xx_add"},[a("span",[t._v("详细地址：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val.address,expression:"val.address"}],attrs:{placeholder:"详细地址"},domProps:{value:t.val.address},on:{input:function(e){e.target.composing||t.$set(t.val,"address",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"add"},[a("img",{attrs:{src:1==this.val.default?t.active:t.normal,alt:""},on:{click:t.checked_tap}}),t._v(" "),a("span",{on:{click:t.checked_tap}},[t._v("设为默认地址")])]),t._v(" "),""==t.val.id?a("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("保存")]):t._e(),t._v(" "),""!=t.val.id?a("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("确认修改")]):t._e()])},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(t){a("Y+T5")},"data-v-06ab8fbb",null);e.default=o.exports},"Y+T5":function(t,e){}});
//# sourceMappingURL=65.f0d231fd3472f8bd9f08.js.map