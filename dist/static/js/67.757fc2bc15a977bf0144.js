webpackJsonp([67],{"3T73":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("exGp"),o=a.n(n),r=a("7I1f"),_=a("L/hj"),c={data:function(){return{user_info_datas:{},avatar:"",select_Province:[],select_City:[],select_district:[]}},created:function(){var t=this;this.$store.state.title_name="我的个人资料",Object(r.a)({url:"/api/getSelfUserInfo",method:"post"}).then(function(e){console.log(e),200==e.data.status&&(t.user_info_datas=e.data.data,t.avatar=""==e.data.data.avatar?"":e.data.data.avatar,t.get_select_Province("once"),t.get_select_city("once"))})},methods:{gender_tap:function(t){console.log(t.target.value),this.user_info_datas.gender=t.target.value},back_tap:function(){this.$router.go(-1)},avatar_tap:function(t){var e=this;return o()(s.a.mark(function a(){var i,n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0==(i=t.target.files[0])){a.next=7;break}return n=e,a.next=5,_.a.uplodeimg(i);case 5:o=a.sent,n.up_img(o);case 7:case"end":return a.stop()}},a,e)}))()},up_img:function(t){var e=this,a=new FormData;a.append("file",t),this.$store.commit("show_looding"),Object(r.a)({url:"/api/upload",method:"post",data:a}).then(function(t){e.$store.commit("hide_looding"),console.log(t.data.data[0]),e.avatar=e.user_info_datas.avatar=t.data.data[0],console.log(e.avatar)})},btn_tap:function(){var t=this;console.log(this.user_info_datas),/^[a-zA-Z]{1}[-_a-zA-Z0-9]{5,19}$/.test(this.user_info_datas.weixin)?""==this.user_info_datas.province||""==this.user_info_datas.city?this.$toast("请选择地区！"):0==this.user_info_datas.district&&""!=this.select_district?this.$toast("请选择区/县！"):Object(r.a)({url:"/api/editUserInfo",data:this.user_info_datas,method:"post"}).then(function(e){t.$store.commit("hide_looding"),200==e.data.status?(t.$toast("修改成功！"),t.$router.push("/personal")):t.$toast(e.data.msg)}):this.$toast("请输入正确的微信号码！")},Province_change:function(t){console.log(t),0!=t.target.value&&(this.user_info_datas.province=t.target.value,this.get_select_city()),this.select_City=this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0},City_change:function(t){0!=t.target.value?(this.user_info_datas.city=t.target.value,this.get_select_district(),this.user_info_datas.district=0):(this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0)},City_click:function(){""==this.user_info_datas.province&&this.$toast("请先选择省/市")},district_change:function(t){0!=t.target.value?this.user_info_datas.district=t.target.value:this.user_info_datas.district=0},district_click:function(){""==this.user_info_datas.city&&this.$toast("请先选择城市")},get_select_Province:function(t){var e=this;Object(r.a)({url:"/api/getAllProvince",method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(e.select_Province=a.data.data,t&&e.get_select_city("once"))})},get_select_city:function(t){var e=this;Object(r.a)({url:"/api/getAllCity",data:{province_id:this.user_info_datas.province},method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(e.select_City=a.data.data,t&&e.get_select_district(t))})},get_select_district:function(){var t=this;Object(r.a)({url:"/api/getAllDistrict",data:{city_id:this.user_info_datas.city},method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(t.select_district=e.data.data)})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("h3",[t._v("修改个人资料")]),t._v(" "),a("div",{staticClass:"avatar_uplode"},[a("div",{style:{background:t.avatar?"":"#fef8da"}},[a("input",{attrs:{type:"file"},on:{change:t.avatar_tap}}),t._v(" "),a("img",{staticClass:"avatar_img",attrs:{src:t.avatar,alt:""}})]),t._v(" "),a("p",[t._v("头像上传")])]),t._v(" "),a("ul",{staticClass:"guke"},[a("li",[a("span",[t._v("姓氏:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.xing,expression:"user_info_datas.xing"}],attrs:{type:"text",placeholder:"姓氏"},domProps:{value:t.user_info_datas.xing},on:{input:function(e){e.target.composing||t.$set(t.user_info_datas,"xing",e.target.value)}}})]),t._v(" "),a("li",[a("span",[t._v("名字:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.name,expression:"user_info_datas.name"}],attrs:{type:"text",placeholder:"名字"},domProps:{value:t.user_info_datas.name},on:{input:function(e){e.target.composing||t.$set(t.user_info_datas,"name",e.target.value)}}})]),t._v(" "),a("li",[a("span",[t._v("手机号:")]),t._v(" "),a("p",[t._v(t._s(t.user_info_datas.mobile))])]),t._v(" "),a("li",[a("span",[t._v("微信号:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.weixin,expression:"user_info_datas.weixin"}],attrs:{type:"text",placeholder:"微信号"},domProps:{value:t.user_info_datas.weixin},on:{input:function(e){e.target.composing||t.$set(t.user_info_datas,"weixin",e.target.value)}}})]),t._v(" "),a("li",{staticClass:"gender"},[a("span",[t._v("性别:")]),t._v(" "),a("div",[a("select",{attrs:{name:"",id:""},domProps:{value:t.user_info_datas.gender},on:{change:t.gender_tap}},[a("option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("女")])])])]),t._v(" "),a("li",[a("span",[t._v("地区:")]),t._v(" "),a("div",{staticClass:"city"},[a("select",{domProps:{value:t.user_info_datas.province},on:{change:t.Province_change}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_Province,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2),t._v(" "),a("select",{domProps:{value:t.user_info_datas.city},on:{change:t.City_change,click:t.City_click}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_City,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2),t._v(" "),a("select",{domProps:{value:t.user_info_datas.district},on:{change:t.district_change,click:t.district_click}},[a("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_district,function(e,i){return a("option",{key:i,domProps:{value:e.region_id}},[t._v(t._s(e.region_name))])})],2)])])]),t._v(" "),a("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("提交")])])])},staticRenderFns:[]};var l=a("VU/8")(c,d,!1,function(t){a("Vji7")},"data-v-03e0e9b0",null);e.default=l.exports},Vji7:function(t,e){}});
//# sourceMappingURL=67.757fc2bc15a977bf0144.js.map