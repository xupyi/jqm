webpackJsonp([37],{XJch:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7I1f"),n=s("L/hj"),i={data:function(){return{is_shadow:!1,total:"0.00",run:[{name:"水电工",type:"plumber_and_electrician"},{name:"瓦工",type:"bricklayer"},{name:"木工",type:"carpentry"},{name:"油工",type:"oil_worker"},{name:"小工",type:"coolie_worker"}],data_lists:[]}},created:function(){var t=this;Object(a.a)({url:"/api/order/getOrderWorker",data:{one_order_number:this.$route.query.id},method:"post"}).then(function(e){if(console.log(e),200==e.data.status){for(var s=0;s<e.data.data.length;s++)e.data.data[s].is_true=!1;t.data_lists=e.data.data}t.$store.commit("hide_looding")})},filters:{help:function(t){return"plumber_and_electrician"==t?"水电工":"bricklayer"==t?"瓦工":"carpentry"==t?"木工":"oil_worker"==t?"油工":"coolie_worker"==t?"小工":void 0},help1:function(t){return 0==t?"未评价":1==t?"好评":2==t?"中评":3==t?"差评":void 0}},methods:{gb:function(){this.is_shadow=!1},chang:function(t){this.get_total()},get_total:function(){for(var t=0,e=0;e<this.data_lists.length;e++){var s=this.data_lists[e];""!=s.construction_money&&(t+=n.a.jia1(s.construction_money))}this.total=t.toFixed(2)},settle_tap:function(t,e){var s=this;0!=e?Object(a.a)({url:"/api/order/evaluateUser",data:{worker_id:t,evaluate_value:e},method:"post"}).then(function(t){console.log(t),200==t.data.status?s.$toast("结算完成"):s.$toast(t.data.msg),s.$store.commit("hide_looding")}):this.$toast("请先评价")},is_del:function(t,e){var s=this;Object(a.a)({url:"/api/order/delOrderWorker",data:{worker_id:t},method:"post"}).then(function(t){console.log(t),200==t.data.status&&s.data_lists.splice(e,1),s.$store.commit("hide_looding")})},ul_true:function(t){this.data_lists[t].is_true=!this.data_lists[t].is_true},assess:function(t,e){this.data_lists[e].evaluate_value=t,this.data_lists[e].is_true=!1},run_tap:function(t){this.$router.push({path:"/personal/run_xiaogong",query:{name:t,order_id:this.$route.query.id}})},btn_tap:function(){for(var t=this,e=[],s=0;s<this.data_lists.length;s++){var n=this.data_lists[s],i={worker_id:n.worker_id,construction_money:n.construction_money,is_settlement:n.is_settlement,evaluate_value:n.evaluate_value};e.push(i)}console.log(e),Object(a.a)({url:"/api/order/saveMultipleOrderWorkers",data:{one_order_number:this.$route.query.id,data:e},method:"post"}).then(function(e){console.log(e),200==e.data.status?(t.$toast("提交成功"),t.$router.go(-1)):400==e.data.status?t.is_shadow=!0:t.$toast(e.data.msg),t.$store.commit("hide_looding")})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"run_work"},[a("p",[t._v("用工管理")]),t._v(" "),a("div",{staticClass:"tj"},[t._v("\n    添加：\n    "),t._l(t.run,function(e,s){return a("span",{key:s,on:{click:function(s){return t.run_tap(e.type)}}},[t._v(t._s(e.name))])})],2),t._v(" "),a("div",{staticClass:"div_ul"},t._l(t.data_lists,function(e,s){return a("div",{key:s,staticClass:"div_li"},[a("p",[t._v("工种："+t._s(t._f("help")(e.user_type_code)))]),t._v(" "),a("p",[t._v("地区："+t._s(e.user_address.province_name)+" "+t._s(e.user_address.city_name)+" "+t._s(e.user_address.district_name))]),t._v(" "),a("p",[t._v("姓名："+t._s(e.xing)+t._s(e.name))]),t._v(" "),a("p",[t._v("电话："+t._s(e.mobile))]),t._v(" "),a("div",[t._v("\n        承包费用：\n        "),a("p",[t._v("\n          ￥\n          "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.construction_money,expression:"item.construction_money"}],attrs:{type:"number"},domProps:{value:e.construction_money},on:{blur:function(e){return t.chang(e)},input:function(s){s.target.composing||t.$set(e,"construction_money",s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"assess"},[t._v("\n        评价：\n        "),a("div",[a("p",{on:{click:function(e){return t.ul_true(s)}}},[t._v(t._s(t._f("help1")(e.evaluate_value)))]),t._v(" "),e.is_true?a("ul",[a("li",{on:{click:function(e){return t.assess(1,s)}}},[t._v("好评")]),t._v(" "),a("li",{on:{click:function(e){return t.assess(2,s)}}},[t._v("中评")]),t._v(" "),a("li",{on:{click:function(e){return t.assess(3,s)}}},[t._v("差评")])]):t._e()])]),t._v(" "),a("div",{staticClass:"border"},[t._v("\n        费用结算：\n        "),a("span",{on:{click:function(s){return t.settle_tap(e.worker_id,e.evaluate_value)}}},[t._v("确认结算")])]),t._v(" "),a("div",{staticClass:"border"},[t._v("\n        操作：\n        "),a("span",{on:{click:function(a){return t.is_del(e.worker_id,s)}}},[t._v("删除")])])])}),0),t._v(" "),a("footer",[a("p",[t._v("\n      合计：\n      "),a("span",[t._v("￥"+t._s(t.total))])]),t._v(" "),a("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("确定提交")])]),t._v(" "),t.is_shadow?a("div",{staticClass:"shadow"},[a("div",[a("div",{staticClass:"shadow_title"},[a("span",[t._v("警报提示")]),t._v(" "),a("img",{attrs:{src:s("qw6E"),alt:""},on:{click:t.gb}})]),t._v(" "),t._m(0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"shadow_cont"},[e("span",[this._v("工长您好！")]),this._v(" "),e("p",[this._v("您输入的施工费用超过预算，无法正常提交，请您仔细确认各项承包费用再提交。")]),this._v(" "),e("p",[this._v("如果预算过低请您与总部施工总监联系。")])])}]};var r=s("VU/8")(i,o,!1,function(t){s("aaAJ")},"data-v-5f71c1b9",null);e.default=r.exports},aaAJ:function(t,e){}});
//# sourceMappingURL=37.7292c421d598373b7eff.js.map