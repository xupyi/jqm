webpackJsonp([33],{"02rY":function(t,a){},wm0F:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=s("mvHQ"),e=s.n(i),o=s("7I1f"),n=s("L/hj"),_={components:{assess:s("PjFk").a},data:function(){return{active:s("FL6W"),normal:s("PBIX"),getByStagesList:"",set_meal_datas:[],item_data:{},nav_index:0,house_List:[],val:{good_id:"",order_type:"2",num:"1",area:"",quantity_room_id:"",stage_number:"",choice_id:""},shadow:!1,foot_index:1,status:"img",img_active:"",img_src:""}},created:function(){var t=this;this.$store.commit("show_looding"),Object(o.a)({url:"/api/getTranslateList",method:"post"}).then(function(a){if(console.log(a),t.$store.commit("hide_looding"),200==a.data.status)if(t.set_meal_datas=a.data.data,sessionStorage.getItem("sele"))for(var s=JSON.parse(sessionStorage.getItem("sele")),i=0;i<a.data.data.length;i++)a.data.data[i].id==s.good_id&&(t.nav_index=i,t.img_src=a.data.data[i].gpics[0],t.item_data=a.data.data[i],t.val=s,t.$route.query.choice_id&&(t.val.choice_id=t.$route.query.choice_id)),sessionStorage.removeItem("sele");else t.img_src=a.data.data[0].gpics[0],t.item_data=a.data.data[0],t.val.good_id=a.data.data[0].id}),Object(o.a)({url:"/api/getQuantityRoom",method:"post"}).then(function(a){console.log(a),t.$store.commit("hide_looding"),200==a.data.status&&(t.house_List=a.data.data)}),Object(o.a)({url:"/api/getByStagesList",method:"post"}).then(function(a){console.log(a),t.$store.commit("hide_looding"),200==a.status&&(t.getByStagesList=a.data.data)})},computed:{total:function(){return""==this.val.price||""==this.val.area?"0":0==/^[0-9]*[1-9][0-9]*$/.test(this.val.area)?(this.$toast("请输入整数！"),this.val.area="","0"):(console.log(this.item_data,this.item_data.price,this.val.area),n.a.accMul(this.item_data.price,this.val.area))}},filters:{stage:function(t){return 1==t?"首付款":5==t?"后期款":"中期款"},total_3:function(t,a){return n.a.accMul(a,Number(t)/100)}},mounted:function(){window.addEventListener("onscroll",function(){var t=document.documentElement.scrollTop||document.body.scrollTop;console.log("滚动距离"+t)})},methods:{go_shop:function(){sessionStorage.setItem("shop_index",2),this.$router.push("/shop")},vr_tap:function(){""!=this.item_data.panorama&&null!=this.item_data.panorama&&(window.location.href=this.item_data.panorama)},img_tap:function(t){this.status="img",this.img_active=t,this.img_src=this.item_data.gpics[t]},img_vr:function(){this.img_active=this.status="vr"},left_tap:function(){"img"==this.status?(this.img_active=0==this.img_active?0:this.img_active-1,this.img_src=this.item_data.gpics[this.img_active]):(this.status="img",this.img_active=this.item_data.gpics.length-1,this.img_src=this.item_data.gpics[this.img_active])},right_tap:function(){this.img_active!=this.item_data.gpics.length-1||""==this.item_data.video_pic_url?"img"==this.status&&this.img_active!=this.item_data.gpics.length-1&&(this.img_active+=1,this.img_src=this.item_data.gpics[this.img_active]):this.img_active=this.status="vr"},house_tap:function(){this.$store.state.is_login?this.$router.push("/home/room"):(this.$toast("暂未登录，请先登录"),this.$router.push("/login"))},footer_tap:function(t){this.foot_index=t},x_shop_tap:function(){this.shadow=!this.shadow},by_stages_tap:function(t){this.val.stage_number=t},nav_tap:function(t,a){this.foot_index=1,this.status="img",this.img_active=0,this.nav_index=a,this.val.good_id=t,this.item_data=this.set_meal_datas[a],this.img_src=this.set_meal_datas[a].gpics[0]},sele:function(){this.$router.push({path:"/select_set_meal",query:{id:this.val.good_id,title:this.set_meal_datas[this.nav_index].title}}),sessionStorage.setItem("sele",e()(this.val))},btn_tap:function(){var t=this;console.log(this.val),""==this.val.quantity_room_id?this.$toast("请选择房屋"):""==this.val.area||0==this.val.area?this.$toast("请输入房屋面积"):""==this.val.stage_number?this.$toast("请选择分期"):""==this.val.choice_id&&"1"==this.val.stage_number?this.$toast("请选择地墙顶造型"):(console.log(this.val),Object(o.a)({url:"/api/addCart",data:this.val,method:"post"}).then(function(a){console.log(a),t.$store.commit("hide_looding"),200==a.data.status?(t.shadow=!t.shadow,sessionStorage.removeItem("tc_select")):t.$toast(a.data.msg)}))}}},c={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"set_meal"}},[i("nav",[i("ul",t._l(t.set_meal_datas,function(a,s){return i("li",{key:s,class:t.nav_index==s?"fir":"",on:{click:function(i){return t.nav_tap(a.id,s)}}},[i("span",[t._v(t._s(a.title))])])}),0)]),t._v(" "),i("main",[i("section",{staticClass:"img_list"},[i("div",{staticClass:"gpics"},["img"==t.status&&""!=t.item_data.panorama&&null!=t.item_data.panorama?i("img",{staticClass:"vr360",attrs:{src:s("DqIX"),alt:""},on:{click:t.vr_tap}}):t._e(),t._v(" "),"img"==t.status?i("img",{staticClass:"big_img",attrs:{src:t.img_src,alt:""},on:{click:t.vr_tap}}):i("video",{staticStyle:{"object-fit":"fill"},attrs:{controls:"",poster:t.item_data.video_pic_url,src:t.item_data.video_url}})]),t._v(" "),i("div",{staticClass:"list_ul"},[i("img",{attrs:{src:s("M0pp"),alt:""},on:{click:t.left_tap}}),t._v(" "),i("ul",[t._l(t.item_data.gpics,function(a,s){return i("li",{key:s,class:t.img_active==s?"img_bor":"",on:{click:function(a){return t.img_tap(s)}}},[i("img",{attrs:{src:a,alt:""}})])}),t._v(" "),t.item_data.video_pic_url?i("li",{staticClass:"vr",class:"vr"==t.img_active?"img_bor":"",on:{click:t.img_vr}},[i("img",{attrs:{src:t.item_data.video_pic_url,alt:""}}),t._v(" "),i("img",{staticClass:"bf_img",attrs:{src:s("m9pA"),alt:""}})]):t._e()],2),t._v(" "),i("img",{attrs:{src:s("QucZ"),alt:""},on:{click:t.right_tap}})])]),t._v(" "),i("section",{staticClass:"star"},[i("span",[t._v("推荐指数：")]),t._v(" "),t._l(t.item_data.rec_star,function(t,a){return i("img",{key:a,attrs:{src:s("RnCc"),alt:""}})})],2),t._v(" "),i("section",{staticClass:"show_title"},[t._v(t._s(t.item_data.show_title))]),t._v(" "),i("section",{staticClass:"yuan_mi"},[t._v("\n      "+t._s(t.item_data.title)+"：\n      "),i("span",[t._v(t._s(parseInt(t.item_data.price)))]),t._v(" 元/平米\n    ")]),t._v(" "),i("section",{staticClass:"brief_introduction"},[t._v(t._s(t.item_data.brief_introduction))]),t._v(" "),i("section",{staticClass:"area"},[t._v("\n      房屋面积："),i("input",{directives:[{name:"model",rawName:"v-model",value:t.val.area,expression:"val.area"}],attrs:{type:"number"},domProps:{value:t.val.area},on:{input:function(a){a.target.composing||t.$set(t.val,"area",a.target.value)}}}),t._v("平米\n    ")]),t._v(" "),i("section",{staticClass:"select_home"},[t._v("\n      选择房屋："),""==t.house_List?i("p",{on:{click:t.house_tap}},[i("span",[t._v("请先提交量房预约")]),t._v(" "),i("img",{attrs:{src:s("RewR"),alt:""}})]):i("select",{directives:[{name:"model",rawName:"v-model",value:t.val.quantity_room_id,expression:"val.quantity_room_id"}],on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.val,"quantity_room_id",a.target.multiple?s:s[0])}}},[i("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.house_List,function(a,s){return i("option",{key:s,domProps:{value:a.id}},[t._v(t._s(a.address))])})],2)]),t._v(" "),i("section",{staticClass:"amount_price"},[i("p",[t._v("\n        精装套餐费合计：RMB ￥\n        "),i("span",[t._v(t._s(t.total)+" ")]),t._v("元\n      ")])]),t._v(" "),i("section",{staticClass:"by_stages"},t._l(t.getByStagesList,function(a,s){return i("p",{key:s,on:{click:function(s){return t.by_stages_tap(a.stage_number)}}},[i("img",{attrs:{src:t.val.stage_number==a.stage_number?t.active:t.normal,alt:""}}),t._v(" "),i("span",[t._v("\n          第"+t._s(a.stage_number)+"期 "+t._s(t._f("stage")(a.stage_number))+t._s(Number(a.stages_proportion))+"%：RMB ￥\n          "),i("span",[t._v(t._s(t._f("total_3")(a.stages_proportion,t.total)))]),t._v(" 元\n        ")])])}),0),t._v(" "),t._m(0),t._v(" "),i("section",{staticClass:"set_btn"},[i("p",[i("span",{on:{click:t.sele}},[t._v("选择地墙顶造型和商品")])]),t._v(" "),i("p",[i("span",{on:{click:t.btn_tap}},[t._v("加入购物车")])])]),t._v(" "),i("section",{staticClass:"footer"},[i("ul",[i("li",{style:{background:1==t.foot_index?"#2FC145":""},on:{click:function(a){return t.footer_tap(1)}}},[t._v("套餐介绍")]),t._v(" "),i("li",{style:{background:2==t.foot_index?"#2FC145":""},on:{click:function(a){return t.footer_tap(2)}}},[t._v("顾客评价")])]),t._v(" "),i("div",[1==t.foot_index?i("div",{staticClass:"foot_cont",domProps:{innerHTML:t._s(t.item_data.content)}}):i("div",[i("assess",{attrs:{assess:t.item_data.id,shop:"taocan"}})],1)])])]),t._v(" "),t.shadow?i("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[i("div",[t._m(1),t._v(" "),i("div",{staticClass:"shadow_btn"},[i("span",{on:{click:t.x_shop_tap}},[t._v("留在本页")]),t._v(" "),i("div",{staticClass:"shadow_btn_line"}),t._v(" "),i("span",{on:{click:t.go_shop}},[t._v("去购物车结算")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("section",{staticClass:"point"},[a("p",[this._v("友情提示：")]),this._v(" "),a("p",[this._v("点击“加入购物车”之前，请您仔细阅读“套餐介绍”。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"shadow_cont"},[a("img",{attrs:{src:s("gSOG"),alt:""}}),this._v(" "),a("p",[this._v("已成功加入购物车")])])}]};var r=s("VU/8")(_,c,!1,function(t){s("02rY")},"data-v-6e08fe95",null);a.default=r.exports}});
//# sourceMappingURL=33.e81ea267105ca4ee5605.js.map