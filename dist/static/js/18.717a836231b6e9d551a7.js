webpackJsonp([18],{"1tLg":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("Xxa5"),e=i.n(s),n=i("exGp"),o=i.n(n),l=i("mvHQ"),r=i.n(l),d=i("7I1f"),u=i("L/hj"),c={data:function(){return{index:"",datas:[{title:"客厅",id:"1",data_lists:[],i:0},{title:"餐厅",data_lists:[],id:"2",i:0},{title:"厨房",data_lists:[],id:"3",i:0},{title:"卫生间",data_lists:[],id:"4",i:0},{title:"卧室",data_lists:[],id:"5",i:0},{title:"衣帽间",data_lists:[],id:"6",i:0},{title:"书房",data_lists:[],id:"7",i:0},{title:"多功能餐厅",data_lists:[],id:"8",i:0},{title:"地下室",data_lists:[],id:"9",i:0},{title:"阁楼",data_lists:[],id:"10",i:0},{title:"其他房间",data_lists:[],id:"11",i:0}],propel_msg:{},name:"",id:"",val:{construction_position:"",panorama_url:"",image_url:""},shadow:!1,is_link:!0}},created:function(){var t=this;this.$store.state.title_name="施工长订单",this.id=this.$route.query.id,Object(d.a)({url:"/api/order/getConstructionImage",data:{one_order_number:this.$route.query.id},method:"post"}).then(function(a){if(console.log(a),200==a.data.status){for(var i=0;i<a.data.data.length;i++){var s=a.data.data[i];t.datas[s.construction_position-1].data_lists.push(s)}t.order_list=a.data.data}t.$store.commit("hide_looding")})},methods:{big_pic:function(t,a){this.$store.state.amplify_img=this.datas[t].data_lists[a].image_url},x_tap:function(){this.shadow=!1,this.index=this.val.image_url=this.val.panorama_url=""},tj_tap:function(){if(""!=this.val.image_url)if(""===this.val.panorama_url||/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/|www\.)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/.test(this.val.panorama_url)){this.val.construction_position=this.datas[this.index].id;var t=r()(this.val);this.datas[this.index].data_lists.push(JSON.parse(t)),this.index=this.val.image_url=this.val.panorama_url="",this.shadow=!1}else this.$toast("地址有误，请检查");else this.$toast("请选择图片")},up_jia:function(t){this.index=t,this.is_link=!(this.datas[t].i>=3),this.shadow=!0},design_url:function(t,a){var i=this;return o()(e.a.mark(function s(){var n,o,l;return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0==(n=t.target.files[0])){s.next=8;break}return console.log(n),o=i,s.next=6,u.a.uplodeimg(n);case 6:l=s.sent,o.up_img(l,a);case 8:case"end":return s.stop()}},s,i)}))()},up_img:function(t,a){var i=this,s=new FormData;s.append("file",t),this.$store.commit("show_looding"),Object(d.a)({url:"/api/upload",method:"post",data:s}).then(function(t){i.$store.commit("hide_looding"),200==t.data.status&&(i.val.image_url=t.data.data[0])})},btn_tap:function(){var t=this;console.log(this.datas);for(var a=[],i=0;i<this.datas.length;i++){var s=this.datas[i].data_lists;if(""!=this.datas[i].data_lists)for(var e=0;e<s.length;e++)""!=s[e]&&a.push(s[e])}if(""!=a){var n={one_order_number:this.id,construction_image:a};Object(d.a)({url:"/api/order/saveConstructionImage",method:"post",data:n}).then(function(a){console.log(a),t.$store.commit("hide_looding"),200==a.data.status&&t.$router.go(-1)})}else this.$toast("请上传隐蔽施工图")}}},_={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"yinbi"},[s("p",[t._v("上传隐蔽工程图")]),t._v(" "),s("div",{staticClass:"section"},t._l(t.datas,function(a,e){return s("section",{key:e},[s("p",[t._v(t._s(a.id)+"、"+t._s(a.title))]),t._v(" "),s("ul",[t._l(a.data_lists,function(a,i){return s("li",{key:i,on:{click:function(a){return t.big_pic(e,i)}}},[s("img",{attrs:{src:a.image_url,alt:""}})])}),t._v(" "),s("li",{staticClass:"up_img",on:{click:function(a){return t.up_jia(e)}}},[s("img",{staticClass:"img_b",attrs:{src:i("6yAn"),alt:""}}),t._v(" "),s("p",[t._v("添加")])])],2)])}),0),t._v(" "),s("div",{staticClass:"btn_tap",on:{click:t.btn_tap}},[t._v("提交")]),t._v(" "),t.shadow?s("div",{staticClass:"shadow"},[s("div",[s("div",{staticClass:"sha_title"},[s("span",[t._v("上传隐蔽施工图")]),t._v(" "),s("img",{attrs:{src:i("qw6E"),alt:""},on:{click:t.x_tap}})]),t._v(" "),s("div",{staticClass:"up_img"},[t.val.image_url?s("img",{staticClass:"img",attrs:{src:t.val.image_url,alt:""}}):s("div",[s("img",{staticClass:"img_b",attrs:{src:i("6yAn"),alt:""}}),t._v(" "),s("input",{attrs:{type:"file"},on:{change:function(a){return t.design_url(a,1)}}}),t._v(" "),s("p",[t._v("添加")])])]),t._v(" "),t.is_link?s("div",{staticClass:"up_add"},[s("p",[t._v("链接地址：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.val.panorama_url,expression:"val.panorama_url"}],attrs:{type:"text",placeholder:"请输入3D链接地址"},domProps:{value:t.val.panorama_url},on:{input:function(a){a.target.composing||t.$set(t.val,"panorama_url",a.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"add_btn"},[s("p",{staticClass:"add",on:{click:function(a){return t.tj_tap()}}},[t._v("添加")])])])]):t._e()])},staticRenderFns:[]};var p=i("VU/8")(c,_,!1,function(t){i("kjMv")},"data-v-16d3ddb1",null);a.default=p.exports},"6yAn":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADFElEQVRYR81XS1IbMRDtBmaKXcgJYk4QfILACYATxDlB8AKpWAErasTCzgkCJwicAHKCOCfAnIBhy8edeo7kaIxmJA9VSbSgKNe0+vXr7tctpn98+DX+T05OOqurq2W/3y/b3pMMYDAYrD08PGwT0Q4z7wQcliJyTUQXeZ5fpoKKArCOD5l5z3N6S0RjIkLka/b3DhG9s/+XzDxcWVn5EgPSCMAY0yOigXVyKyLDyWRycXBwAOcvjjFmg4h6ItJj5jcW4JZSalSXoloARVEcMfOhiNwT0VBrfZSaZ8vaHuytzSel1FnIPgjAGDMkos9EBKp3miJoAnV6eroJxiwbQRAvAFjav8J5lmUbsRzGWEFaUJwWRHc+mAoAtNXy8vIPEWFm3mwb+TwoMCEiVyIyzvO86wdVAVAUxRkzfySi2pz5lyPXqQx5NXXs19MMgI3+BtQrpdBS0WOMQTeMlFIhXajY28IcM7NkWbbugM8AFEWBqkXLJUWP240xQkTflVKbUbS/v58Wt4jsaq0vYOMDGDHz+yzL3qbS2gIAdAI1dq61hsb8AYDLROSn1hofJZ1FAeDSoiignnda6/UZAOTn8fHxbhE626TA2mBefFBKTdmf/vHapFKhjgYL8FuAFuQeEVWkVkRKrfVuiEZjzOIAbIfA0A2bWIpqRcwBcLU2ZcBrwcuUlnLe29RAkIFX5HOhNnRFyMyl05r/pw3/hhA5OfbFLiTFkNZurMps2iDF4xQltJ10g0GX53nnhRTb/Cw8jGCXopzRYTTXDeXz83O3bvVKYcf/xq5qkOB7P/qKFHutBY3GQjLKsmwrJbomQI567JX+EHI2wZXM2wugcJiOtUtlk3Mb+ZV13tdaYxpWTtNS6uoB+/6e1vp8EeptzrFXIvKg82AK5nLn0kFYp4joqOnRYRV1G4CZuWM36p6b/aEAog8TXLq0tIQVHauaO0gJHh/Xk8lkjZkxwvFAmY1yETnO83wYq6EoAOfRAsHqhUfH+5p0XGIDbnq8JNdALN+o7qenp2nE+/v7mJStTjIDrW5PMPoFpA/zMA7KQBcAAAAASUVORK5CYII="},kjMv:function(t,a){}});
//# sourceMappingURL=18.717a836231b6e9d551a7.js.map