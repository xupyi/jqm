webpackJsonp([69],{Jpkp:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mvHQ"),i=e.n(s),r=e("Xxa5"),o=e.n(r),n=e("exGp"),_=e.n(n),d=e("7I1f"),c=e("L/hj"),u={data:function(){return{i_name:"",user_info_datas:{},avatar:"",select_Province:[],select_City:[],select_district:[],select_year:[],GoodArea:[],id_card0:"",id_card1:"",design_pic_list:[],flag:!0,show:!1,add_work_his:{},star_time:"",end_time:"",work_company:"",work_post:"",work_list:"",goodarea_true:[],user_type_:""}},created:function(){var t=this;this.user_type_=this.$route.query.user_type,"designer"==this.$route.query.user_type?this.$store.state.title_name="设计师个人资料":"constructor"==this.$route.query.user_type?this.$store.state.title_name="施工长个人资料":"partner"==this.$route.query.user_type&&(this.$store.state.title_name="城市合伙人个人资料");var a=[];Object(d.a)({url:"/api/getUserGoodArea",method:"post"}).then(function(t){if(console.log(t.data),200==t.data.status){for(var e=0;e<t.data.data.length;e++)t.data.data[e].is=!1;a=t.data.data}}),Object(d.a)({url:"/api/getUserStaffInfo",data:{user_type:this.$route.query.user_type},method:"post"}).then(function(e){if(console.log(e),200==e.data.status){null!=e.data.data.identification_info&&(t.id_card0=e.data.data.identification_info[0],t.id_card1=e.data.data.identification_info[1]),e.data.data.say_to_user?e.data.data.say_to_user:e.data.data.say_to_user="",t.user_info_datas=e.data.data,t.avatar=""==e.data.data.avatar?"":e.data.data.avatar,null!=e.data.data.show_picture&&(t.design_pic_list=e.data.data.show_picture),t.work_list=e.data.data.work_list,t.get_select_Province("once"),t.get_select_city("once");var s=e.data.data.goods_type?e.data.data.goods_type.split(","):[];console.log(s,"brr"),t.goodarea_true=s;for(var i=0;i<a.length;i++){var r=a[i];if(""!=s)for(var o=0;o<s.length;o++)s[o]==r.style_id&&(r.is=!0);t.GoodArea=a}}});for(var e=(new Date).getFullYear(),s=0;s<80;s++)this.select_year.push(e-s)},methods:{gender_tap:function(t){console.log(t.target.value),this.user_info_datas.gender=t.target.value},big_pic:function(t){this.$store.state.amplify_img=t},back_tap:function(){this.$router.go(-1)},goodarea_tap:function(t,a){var e=this.goodarea_true.indexOf(String(t));-1!=e?(this.goodarea_true.splice(e,1),this.GoodArea[a].is=!1):(this.GoodArea[a].is=!0,this.goodarea_true.push(String(t))),console.log(this.goodarea_true)},avatar_tap:function(t){var a=this;return _()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(s=t.target.files[0])){e.next=6;break}return e.next=4,c.a.uplodeimg(s);case 4:i=e.sent,a.get_img(i,"avatar");case 6:case"end":return e.stop()}},e,a)}))()},add_work:function(){this.show=!this.show},add_work_add:function(){var t=this,a={work_start_time:this.star_time,work_end_time:this.end_time,work_company:this.work_company,work_post:this.work_post};console.log(a),""==a.work_start_time?this.$toast("请选择从业开始时间！"):a.work_end_time<a.work_start_time?this.$toast("结束时间不能小于开始时间"):""==a.work_end_time?this.$toast("请选择从业结束时间！"):""==a.work_company?this.$toast("请填写任职公司！"):""==a.work_post?this.$toast("请填写职务和工作内容！"):(a.user_type=this.user_type_,Object(d.a)({url:"/api/addUserWork",data:a,method:"post"}).then(function(a){200==a.data.status&&(t.$toast("成功添加！"),t.show=!t.show,Object(d.a)({url:"/api/getUserStaffInfo",data:{user_type:t.user_type_},method:"post"}).then(function(a){200==a.data.status&&(t.work_list=a.data.data.work_list)}))}))},del_work:function(t,a){var e=this;Object(d.a)({url:"/api/delUserWork",data:{work_id:t},method:"post"}).then(function(t){e.$toast("删除成功！"),e.work_list.splice(a,1)})},id_card_tap:function(t){var a=this;return _()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(s=t.target.files[0])){e.next=6;break}return e.next=4,c.a.uplodeimg(s);case 4:i=e.sent,a.get_img(i,0);case 6:case"end":return e.stop()}},e,a)}))()},invition_tap:function(t){var a=this;return _()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(s=t.target.files[0])){e.next=6;break}return e.next=4,c.a.uplodeimg(s);case 4:i=e.sent,a.get_img(i,1);case 6:case"end":return e.stop()}},e,a)}))()},design_pic_tap:function(t){var a=this;return _()(o.a.mark(function e(){var s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==(s=t.target.files[0])){e.next=6;break}return e.next=4,c.a.uplodeimg(s);case 4:i=e.sent,a.get_img(i,"design_pic_list");case 6:case"end":return e.stop()}},e,a)}))()},x_tap:function(t){this.design_pic_list.splice(t,1)},get_img:function(t,a){var e=this,s=new FormData;s.append("file",t),this.$store.commit("show_looding"),Object(d.a)({url:"/api/upload",method:"post",data:s}).then(function(t){e.$store.commit("hide_looding"),console.log(t.data.data[0]),0==a?e.id_card0=t.data.data[0]:1==a?e.id_card1=t.data.data[0]:"design_pic_list"==a?e.design_pic_list.push(t.data.data[0]):"avatar"==a&&(e.avatar=e.user_info_datas.avatar=t.data.data[0])})},btn_tap:function(){var t=this;if(/^[a-zA-Z]{1}[-_a-zA-Z0-9]{5,19}$/.test(this.user_info_datas.weixin)){if(""==this.user_info_datas.province||""==this.user_info_datas.city)this.$toast("请选择地区！");else if(0==this.user_info_datas.district&&""!=this.select_district)return void this.$toast("请选择区/县！")}else this.$toast("请输入正确的微信号码！");if(this.user_info_datas.goods_type=this.goodarea_true.join(),""==this.id_card0)this.$toast("请上传身份证正面照片！");else if(""==this.id_card1)this.$toast("请上传身份证反面照片！");else if(""==this.user_info_datas.say_to_user.length||this.user_info_datas.say_to_user.length<20)this.$toast("请输入20字以上的内容！");else if(""==this.user_info_datas.birth_month||""==this.user_info_datas.birth_year)this.$toast("请选择出生年月！");else if(""==this.goodarea_true)this.$toast("请选择擅长的类型");else{var a=[this.id_card0,this.id_card1];this.user_info_datas.identification_info=i()(a),this.user_info_datas.show_picture=i()(this.design_pic_list),this.user_info_datas.designer_works=i()(this.user_info_datas.designer_works),this.user_info_datas.user_type=this.user_type_,this.$store.commit("show_looding"),Object(d.a)({url:"/api/saveUserStaffInfo",data:this.user_info_datas,method:"post"}).then(function(a){t.$store.commit("hide_looding"),200==a.data.status?(t.$toast("修改成功！"),t.$router.go(-1)):t.$toast(a.data.msg)})}},Province_change:function(t){console.log(t),0!=t.target.value&&(this.user_info_datas.province=t.target.value,this.get_select_city()),this.select_City=this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0},City_change:function(t){0!=t.target.value?(this.user_info_datas.city=t.target.value,this.get_select_district(),this.user_info_datas.district=0):(this.select_district=[],this.user_info_datas.city=this.user_info_datas.district=0)},City_click:function(){""==this.user_info_datas.province&&this.$toast("请先选择省/市")},district_change:function(t){0!=t.target.value?this.user_info_datas.district=t.target.value:this.user_info_datas.district=0},district_click:function(){""==this.user_info_datas.city&&this.$toast("请先选择城市")},get_select_Province:function(t){var a=this;Object(d.a)({url:"/api/getAllProvince",method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(a.select_Province=e.data.data,t&&a.get_select_city("once"))})},get_select_city:function(t){var a=this;Object(d.a)({url:"/api/getAllCity",data:{province_id:this.user_info_datas.province},method:"post"}).then(function(e){console.log(e.data),200==e.data.status&&(a.select_City=e.data.data,t&&a.get_select_district(t))})},get_select_district:function(){var t=this;Object(d.a)({url:"/api/getAllDistrict",data:{city_id:this.user_info_datas.city},method:"post"}).then(function(a){console.log(a.data),200==a.data.status&&(t.select_district=a.data.data)})}}},l={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",[s("h3",[t._v("修改个人资料")]),t._v(" "),s("div",{staticClass:"avatar_uplode"},[s("div",{style:{background:t.avatar?"":"#fef8da"}},[s("input",{attrs:{type:"file"},on:{change:t.avatar_tap}}),t._v(" "),s("img",{staticClass:"avatar_img",attrs:{src:t.avatar,alt:""}})]),t._v(" "),s("p",[t._v("头像上传")])]),t._v(" "),s("ul",{staticClass:"guke"},[s("li",[s("span",[t._v("姓氏:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.xing,expression:"user_info_datas.xing"}],attrs:{type:"text",placeholder:"姓氏"},domProps:{value:t.user_info_datas.xing},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"xing",a.target.value)}}})]),t._v(" "),s("li",[s("span",[t._v("名字:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.name,expression:"user_info_datas.name"}],attrs:{type:"text",placeholder:"名字"},domProps:{value:t.user_info_datas.name},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"name",a.target.value)}}})]),t._v(" "),s("li",[s("span",[t._v("手机号:")]),t._v(" "),s("p",[t._v(t._s(t.user_info_datas.mobile))])]),t._v(" "),s("li",[s("span",[t._v("微信号:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.weixin,expression:"user_info_datas.weixin"}],attrs:{type:"text",placeholder:"微信号"},domProps:{value:t.user_info_datas.weixin},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"weixin",a.target.value)}}})]),t._v(" "),s("li",{staticClass:"gender"},[s("span",[t._v("性别:")]),t._v(" "),s("div",[s("select",{attrs:{name:"",id:""},domProps:{value:t.user_info_datas.gender},on:{change:t.gender_tap}},[s("option",{attrs:{value:"1"}},[t._v("男")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("女")])])])]),t._v(" "),s("li",[s("span",[t._v("地区:")]),t._v(" "),s("div",[s("select",{domProps:{value:t.user_info_datas.province},on:{change:t.Province_change}},[s("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_Province,function(a,e){return s("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2),t._v(" "),s("select",{domProps:{value:t.user_info_datas.city},on:{change:t.City_change,click:t.City_click}},[s("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_City,function(a,e){return s("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2),t._v(" "),s("select",{domProps:{value:t.user_info_datas.district},on:{change:t.district_change,click:t.district_click}},[s("option",{attrs:{selected:"",value:"0"}},[t._v("请选择")]),t._v(" "),t._l(t.select_district,function(a,e){return s("option",{key:e,domProps:{value:a.region_id}},[t._v(t._s(a.region_name))])})],2)])])]),t._v(" "),s("div",{staticClass:"succer"},[s("ul",[s("li",{staticClass:"birthday"},[s("span",[t._v("出生年月：")]),t._v(" "),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.birth_year,expression:"user_info_datas.birth_year"}],attrs:{name:"",id:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user_info_datas,"birth_year",a.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(t.select_year,function(a,e){return s("option",{key:e,domProps:{value:a}},[t._v(t._s(a)+"年")])})],2),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.birth_month,expression:"user_info_datas.birth_month"}],attrs:{name:"",id:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user_info_datas,"birth_month",a.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"",disabled:""}},[t._v("请选择")]),t._v(" "),t._l(12,function(a,e){return s("option",{key:e,domProps:{value:a}},[t._v(t._s(a>9?a:"0"+a)+"月")])})],2)])]),t._v(" "),s("li",{staticClass:"GoodArea"},[s("span",[t._v("擅长：")]),t._v(" "),s("div",t._l(t.GoodArea,function(a,i){return s("span",{key:i,on:{click:function(e){return t.goodarea_tap(a.style_id,i)}}},[t._v("\n              "+t._s(a.style_name)+"\n              "),a.is?s("img",{attrs:{src:e("FL6W"),alt:""}}):t._e()])}),0)]),t._v(" "),s("li",{staticStyle:{"font-weight":"bold"}},[t._v("工作经历：")]),t._v(" "),""!=t.work_list?s("li",{staticClass:"work"},t._l(t.work_list,function(a,e){return s("div",{key:e},[s("p",[t._v("\n              从业时间：\n              "),s("span",[t._v(t._s(a.work_start_time))]),t._v(" 至\n              "),s("span",[t._v(t._s(a.work_end_time))])]),t._v(" "),s("p",[t._v("\n              任职公司：\n              "),s("span",[t._v(t._s(a.work_company))])]),t._v(" "),s("p",{staticClass:"post"},[t._v("\n              职务和工作内容：\n              "),s("span",[t._v(t._s(a.work_post))])]),t._v(" "),s("p",{staticClass:"work_caozuo"},[s("span",{on:{click:function(s){return t.del_work(a.work_id,e)}}},[t._v("删除")])])])}),0):t._e(),t._v(" "),s("li",{staticClass:"work_history",on:{click:t.add_work}},[s("img",{attrs:{src:e("A6cZ"),alt:""}}),t._v("添加工作经历\n        ")]),t._v(" "),s("li",{staticClass:"id_card"},[t._m(0),t._v(" "),s("div",[s("div",{staticClass:"id_card_img"},[""==t.id_card0?s("div",[s("img",{attrs:{src:e("gUz4"),alt:""}}),t._v(" "),s("span",[t._v("正面照片上传")])]):s("img",{attrs:{src:t.id_card0,alt:""}}),t._v(" "),s("input",{attrs:{type:"file",accept:"image/*"},on:{change:t.id_card_tap}})]),t._v(" "),s("div",{staticClass:"id_card_img"},[""==t.id_card1?s("div",[s("img",{attrs:{src:e("gUz4"),alt:""}}),t._v(" "),s("span",[t._v("反面照片上传")])]):s("img",{attrs:{src:t.id_card1,alt:""}}),t._v(" "),s("input",{attrs:{type:"file",accept:"image/*"},on:{change:t.invition_tap}})])])]),t._v(" "),s("li",{staticClass:"say_to_user"},[t._m(1),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user_info_datas.say_to_user,expression:"user_info_datas.say_to_user"}],attrs:{placeholder:"请输入内容~",rows:"3"},domProps:{value:t.user_info_datas.say_to_user},on:{input:function(a){a.target.composing||t.$set(t.user_info_datas,"say_to_user",a.target.value)}}})])])]),t._v(" "),s("section",[s("div",{staticClass:"design_pic"},[s("p",[t._v(t._s(t.i_name)+"作品：")]),t._v(" "),s("ul",[t._l(t.design_pic_list,function(a,i){return s("li",{key:i},[s("img",{attrs:{src:a,alt:""},on:{click:function(e){return t.big_pic(a)}}}),t._v(" "),s("img",{staticClass:"x_img",attrs:{src:e("QOOQ"),alt:""},on:{click:function(a){return t.x_tap(i)}}})])}),t._v(" "),s("li",{staticClass:"design_up"},[t._m(2),t._v(" "),s("input",{attrs:{type:"file"},on:{change:t.design_pic_tap}})])],2)])]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.btn_tap}},[t._v("提交")]),t._v(" "),t.show?s("div",{staticClass:"dialog",on:{touchmove:function(t){t.preventDefault()}}},[s("div",[s("h3",[t._v("添加工作经历")]),t._v(" "),s("div",{staticClass:"work_cont"},[s("p",[t._v("\n            从业开始时间：\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.star_time,expression:"star_time"}],attrs:{type:"date"},domProps:{value:t.star_time},on:{input:function(a){a.target.composing||(t.star_time=a.target.value)}}})]),t._v(" "),s("p",[t._v("\n            从业结束时间：\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.end_time,expression:"end_time"}],attrs:{type:"date"},domProps:{value:t.end_time},on:{input:function(a){a.target.composing||(t.end_time=a.target.value)}}})]),t._v(" "),s("p",[t._v("\n            任职公司：\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.work_company,expression:"work_company"}],attrs:{type:"text"},domProps:{value:t.work_company},on:{input:function(a){a.target.composing||(t.work_company=a.target.value)}}})]),t._v(" "),s("div",[t._v("\n            职务和工作内容：\n            "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.work_post,expression:"work_post"}],attrs:{cols:"30",rows:"3"},domProps:{value:t.work_post},on:{input:function(a){a.target.composing||(t.work_post=a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"work_btn"},[s("span",{on:{click:t.add_work}},[t._v("取消")]),t._v(" "),s("span",{on:{click:t.add_work_add}},[t._v("确定")])])])]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("\n            身份证正反面上传：\n            "),a("span",[this._v("（照片要求能看清文字）")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("\n            最想和业主说的一段话：\n            "),a("span",[this._v("（20字以上）")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("img",{attrs:{src:e("gUz4"),alt:""}}),this._v(" "),a("span",[this._v("添加照片")])])}]};var v=e("VU/8")(u,l,!1,function(t){e("cMtU")},"data-v-02bdf8f5",null);a.default=v.exports},cMtU:function(t,a){}});
//# sourceMappingURL=69.0da25857886c1284702e.js.map