webpackJsonp([66],{e0cn:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=s("7I1f"),o={data:function(){return{i:"",order_list:[],is_show:!1,is_shadow:!1,qx_shadow:!1,tk_shadow:!1,del_shadow1:!1,pj_shadow:!1,one_order_number:"",price:"",name:"",customer_wx_qrcode:"",type:""}},created:function(){var t=this;this.type=this.$route.query.type,this.get_data(this.$route.query.type),Object(_.a)({url:"/api/getContactOur",method:"post"}).then(function(e){console.log(e.data),t.code=e.data.data.customer_service_qr_code,t.customer_service_qr_code_name=e.data.data.customer_service_qr_code_name})},watch:{$route:function(t,e){console.log(t),this.order_list=[],this.get_data(t.query.type),this.type=t.query.type}},filters:{help:function(t,e){return 0==t?"等待支付":1==t&&4==e?"正在设计":1==t?"正在施工":2==t?"等待确认":3==t?"交易完成":4==t?"退款中":5==t?"退货成功":6==t?"评价完成":7==t?"拒绝退货":8==t?"退款完成":9==t?"关闭订单":10==t?"用户主动关闭":11==t?"追评完成":""}},methods:{assess_tap:function(t){2==this.type?this.$router.push({path:"/tc_assess",query:{id:t,is:0}}):this.$router.push()},append_assess_tap:function(t){2==this.type?this.$router.push({path:"/tc_assess",query:{id:t,is:0}}):this.$router.push({path:"/order_assess",query:{id:t}})},big_pic:function(t){this.$store.state.amplify_img=t},confirm:function(){this.tk_shadow=!1,this.$router.push({path:"/refund",query:{id:this.one_order_number,price:this.price}})},tk_show:function(t,e){this.tk_shadow=!0,this.price=e,this.one_order_number=t},qx_order_tap:function(t,e){this.qx_shadow=!this.qx_shadow,this.one_order_number=t},x_tap:function(){this.is_shadow=!1},customer_service:function(t,e){this.name=e,this.customer_wx_qrcode=t,this.is_shadow=!this.is_shadow},settle_tap:function(t){Object(_.a)({url:"/api/order/getOnePayParameter",data:{id:t,request_type:"pc"},method:"post"}).then(function(t){console.log(t),200==t.data.status&&(window.location.href=t.data.data.billQRCode)})},no_show:function(){this.del_shadow1=!1,this.tk_shadow=!1,this.pj_shadow=!1,this.price="",this.one_order_number=""},pj__tap:function(t){this.one_order_number=t||"",this.pj_shadow=!0},pj_shop_tap:function(){var t=this;Object(_.a)({url:"/api/order/ConfirmReceipt",data:{one_order_number:this.one_order_number},method:"post"}).then(function(e){console.log(e),200==e.data.status&&(t.$toast("已确认收货"),t.pj_shadow=!1,t.$router.push({path:"/order_assess",query:{id:t.one_order_number,order_type:4}}),t.$router.push({path:"/order_assess",query:{id:t.one_order_number,order_type:3}}))})},get_data:function(t){var e=this;this.$store.commit("show_looding"),Object(_.a)({url:"/api/order/UserOrderList",data:{order_type:t},method:"post"}).then(function(t){console.log(t),200==t.data.status&&(e.order_list=t.data.data),e.$store.commit("hide_looding")})},quxiao:function(){var t=this;this.$store.commit("show_looding"),Object(_.a)({url:"/api/order/cancelOrder",data:{one_order_number:this.one_order_number},method:"post"}).then(function(e){console.log(e),200==e.data.status&&(t.get_data(t.type),t.$toast("订单已取消"),t.qx_shadow=!1),t.$store.commit("hide_looding")})},del_tap:function(t,e){this.one_order_number=t,this.del_shadow1=!0},del_qd_tap:function(){var t=this;Object(_.a)({url:"/api/order/deleteUserOrder",data:{one_order_number:this.one_order_number},method:"post"}).then(function(e){console.log(e),200==e.data.status&&(t.$toast("订单已删除"),t.get_data(t.type),t.del_shadow1=!1),t.$store.commit("hide_looding")})}}},a={render:function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",[""==t.order_list?_("p",{staticClass:"condition"},[t._v("您还没有相关的订单哦~")]):_("ul",t._l(t.order_list,function(e,s){return _("li",{key:s},[_("div",{staticClass:"order_number"},[_("p",[t._v("订单号："+t._s(e.one_order_number))]),t._v(" "),_("span",{on:{click:function(s){return t.customer_service(e.customer_wx_qrcode,e.customer_name)}}},[t._v("联系客服")])]),t._v(" "),_("div",{staticClass:"order_time"},[t._v("订单时间："+t._s(e.created_at))]),t._v(" "),_("div",{staticClass:"one_good"},[_("div",{staticClass:"order_des"},[_("div",[4==t.type?_("h5",[t._v("设计费：")]):t._e(),t._v(" "),3==t.type?_("h5",[t._v("施工费：")]):t._e(),t._v(" "),2==t.type?_("h5",[t._v(t._s(e.title)+"：")]):t._e(),t._v(" "),_("span",[t._v("￥"+t._s(e.total_sum))])]),t._v(" "),2==t.type?_("div",[_("h5",[t._v(t._s(e.title)+"每平米价格：")]),t._v(" "),_("span",[t._v(t._s(e.price))])]):t._e(),t._v(" "),_("div",[4==t.type?_("h5",[t._v("设计师：")]):t._e(),t._v(" "),3==t.type?_("h5",[t._v("施工长：")]):t._e(),t._v(" "),4==t.type?_("p",[t._v(t._s(e.design_user_info.nickname))]):t._e(),t._v(" "),3==t.type?_("p",[t._v(t._s(e.constructor_user_info.nickname))]):t._e()]),t._v(" "),_("div",[4==t.type?_("h5",[t._v("设计师手机号：")]):t._e(),t._v(" "),3==t.type||2==t.type?_("h5",[t._v("施工长手机号：")]):t._e(),t._v(" "),4==t.type?_("p",[t._v(t._s(e.design_user_info.mobile))]):t._e(),t._v(" "),3==t.type||2==t.type?_("p",[t._v(t._s(e.constructor_user_info.mobile))]):t._e()]),t._v(" "),_("div",[4==t.type?_("h5",[t._v("每平米设计费：")]):t._e(),t._v(" "),3==t.type?_("h5",[t._v("每平米施工费：")]):t._e(),t._v(" "),4==t.type||3==t.type?_("p",[t._v(t._s(e.price))]):t._e()]),t._v(" "),_("div",[_("h5",[t._v("房屋面积：")]),t._v(" "),_("p",[t._v(t._s(e.area)+"平方米")])]),t._v(" "),_("div",[_("h5",[t._v("房屋地址：")]),t._v(" "),_("p",[t._v(t._s(e.room_address_detail))])])]),t._v(" "),8==e.goods_status?_("div",{staticClass:"tkcg"},[t._v("退款成功：-￥"+t._s(e.refund_price))]):t._e(),t._v(" "),_("div",{staticClass:"order_status"},[t._v("\n          交易状态："+t._s(t._f("help")(e.goods_status,t.type))+"\n          "),8==e.goods_status?_("span",[t._v("退款成功")]):t._e()]),t._v(" "),_("div",{staticClass:"order_more"},[0==e.goods_status?_("span",{on:{click:function(s){return t.settle_tap(e.id)}}},[t._v("立即付款")]):t._e(),t._v(" "),0==e.goods_status?_("span",{on:{click:function(_){return t.qx_order_tap(e.one_order_number,s)}}},[t._v("取消订单")]):t._e(),t._v(" "),5==e.goods_status||6==e.goods_status||8==e.goods_status||9==e.goods_status||10==e.goods_status||11==e.goods_status?_("span",{on:{click:function(_){return t.del_tap(e.one_order_number,s)}}},[t._v("删除订单")]):t._e(),t._v(" "),2==e.goods_status?_("span",{on:{click:function(s){return t.pj__tap(e.one_order_number)}}},[t._v("确认并评价")]):t._e(),t._v(" "),2==e.goods_status?_("a",{attrs:{href:e.quantity_room_info.jingzhuang_url}},[t._v("精装全景")]):t._e(),t._v(" "),1==e.goods_status?_("span",{on:{click:function(s){return t.tk_show(e.one_order_number,e.total_sum)}}},[t._v("申请退款")]):t._e(),t._v(" "),6==e.goods_status&&0==e.is_thirty_evaluate?_("router-link",{attrs:{to:{path:"/order_assess",query:{id:e.one_order_number}}}},[t._v("追加评论")]):t._e(),t._v(" "),3==e.goods_status&&0==e.is_thirty_evaluate?_("router-link",{attrs:{to:{path:"/order_assess",query:{id:e.one_order_number}}}},[t._v("待评价")]):t._e(),t._v(" "),_("router-link",{attrs:{to:{path:"/order_detail",query:{id:e.one_order_number,type:t.type}}}},[t._v("订单详情")])],1)]),t._v(" "),4==t.type?_("div",{staticClass:"order_total"},[t._v("\n        设计费合计：\n        "),_("span",[t._v("￥"+t._s(e.total_sum))])]):t._e(),t._v(" "),3==t.type?_("div",{staticClass:"order_total"},[t._v("\n        第"+t._s(e.stage_number)+"期施工费合计：\n        "),_("span",[t._v("￥"+t._s(e.total_sum))])]):t._e(),t._v(" "),2==t.type?_("div",{staticClass:"order_total"},[t._v("\n        第"+t._s(e.stage_number)+"期套餐费合计：\n        "),_("span",[t._v("￥"+t._s(e.total_sum))])]):t._e()])}),0),t._v(" "),t.is_shadow?_("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[_("div",[_("p",{staticClass:"head"},[t._v("\n        "+t._s(t.name)+"\n        "),_("img",{attrs:{src:s("qw6E"),alt:""},on:{click:t.customer_service}})]),t._v(" "),_("div",{staticClass:"cont"},[_("img",{attrs:{src:t.customer_wx_qrcode,alt:"图片加载失败"}}),t._v(" "),_("p",[t._v("长按上面的二维码，关注客服微信号")])])])]):t._e(),t._v(" "),t.qx_shadow?_("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[_("div",[t._m(0),t._v(" "),_("div",{staticClass:"shadow_btn"},[_("span",{on:{click:t.qx_order_tap}},[t._v("取消")]),t._v(" "),_("div",{staticClass:"shadow_btn_line"}),t._v(" "),_("span",{on:{click:function(e){return t.quxiao()}}},[t._v("确定")])])])]):t._e(),t._v(" "),t.tk_shadow?_("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[_("div",[_("div",{staticClass:"cont qx_cont"},[2==t.i?_("p",[t._v("确定要退货退款吗？")]):_("p",[t._v("确定要退款吗？")])]),t._v(" "),_("div",{staticClass:"shadow_btn"},[_("span",{on:{click:t.no_show}},[t._v("取消")]),t._v(" "),_("div",{staticClass:"shadow_btn_line"}),t._v(" "),_("span",{on:{click:t.confirm}},[t._v("确定")])])])]):t._e(),t._v(" "),t.del_shadow1?_("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[_("div",[t._m(1),t._v(" "),_("div",{staticClass:"shadow_btn"},[_("span",{on:{click:t.no_show}},[t._v("取消")]),t._v(" "),_("div",{staticClass:"shadow_btn_line"}),t._v(" "),_("span",{on:{click:t.del_qd_tap}},[t._v("确定")])])])]):t._e(),t._v(" "),t.pj_shadow?_("div",{staticClass:"shadow",on:{touchmove:function(t){t.preventDefault()}}},[_("div",[_("div",{staticClass:"cont qx_cont"},[4==t.type?_("p",[t._v("请确认设计已完成")]):_("p",[t._v("请确认施工已完成")]),t._v(" "),_("p",[t._v("点击确定后订单完成")])]),t._v(" "),_("div",{staticClass:"shadow_btn"},[_("span",{on:{click:t.no_show}},[t._v("取消")]),t._v(" "),_("div",{staticClass:"shadow_btn_line"}),t._v(" "),_("span",{on:{click:t.pj_shop_tap}},[t._v("确定")])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cont qx_cont"},[e("p",[this._v("您确定要取消该订单吗？")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cont qx_cont"},[e("p",[this._v("确定要删除该订单吗？")])])}]};var r=s("VU/8")(o,a,!1,function(t){s("ex0k")},"data-v-03e3dac4",null);e.default=r.exports},ex0k:function(t,e){}});
//# sourceMappingURL=66.5f9a41f0101514ff8070.js.map